import { initializeApp, cert } from 'firebase-admin/app'; import { getDatabase } from 'firebase-admin/database'; import * as dotenv from 'dotenv'; dotenv.config(); const firebaseConfig = JSON.parse(process.env.FIREBASE_SERVICE_ACCOUNT_JSON); const app = initializeApp({ credential: cert(firebaseConfig), databaseURL: process.env.FIREBASE_DATABASE_URL }); export const handler = async (event) => { const uid = JSON.parse(event.body).uid; const ref = getDatabase().ref(`users/${uid}`); const snapshot = await ref.once('value'); const countryName = snapshot.val()?.countryName; return { statusCode: 200, body: JSON.stringify({ countryName }) }; };
